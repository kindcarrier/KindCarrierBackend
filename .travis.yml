language: ruby
rvm:
- 2.6.1
before_script:
- cp config/database.yml.travis config/database.yml
- psql -c 'create database travis_ci_test;' -U postgres
- curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64 > ./cc-test-reporter
- chmod +x ./cc-test-reporter
- "./cc-test-reporter before-build"
script:
- bundle install --jobs=3 --retry=3
- bundle exec rake db:create
- bundle exec rake db:migrate
- bundle exec rspec
- bundle exec rubocop
after_script:
- "./cc-test-reporter after-build --exit-code $TRAVIS_TEST_RESULT"
notifications:
- false
env:
  global:
  - CC_TEST_REPORTER_ID=42f5ca5f88c526ac3b9464d949e97f630fc605b5eb23262a3c6f5f23b35f2b67
deploy:
  provider: heroku
  api_key:
    secure: iIGqpas37WMP+Lz31M9Rxx7vojlwopkXc5LYBw0r21Zak5J3gWgVTHYJvl/yBCvOq+Bwgu9eAx8ROaxzFC8d0UQfo0hU6zki+8YqBEo4k7Nf3VxNw7qalDIQsiN/GP5sYwSTuyxYpOWkKBDDhwJb33kQAMA7iP2zOMiT6jVYZ99uQY2HccZitvE9a1RlcK+RXZIBwTP2IlXVE3vsjSJ209GSUyU/A5jsjaNeJPvN5Xz6RrezQuTPQZSrgKHSLDtIBSXNn2aA18BCRdiwNoNI4MNLFCbiBGKwYo1BhE/NlNqW2cymlY3ae08GbevQBpnl7trXSiaDIetFB6QMaLZcaRzVhrmT+callDsDVUp1Mu1P32yIG3Bda7V5l9Aj1ku6KzTgorIpAnpm8ebt39yL97EORxgyTeLxdFCARQLCxROsn315Pq3UIaa0GYoKCLcLeusdhWw8d8S1W7z8+MDM3bOCUoAqkoDFZEbJaghuGHg8xTmPPA2JJuGoJl1WaYqbkrzp48t6Roh08pu2nQitC/TCyh2cLDXo0FMYVwQEy3uX5HUnSk9q1C7OoKhMfdoyOfF+Gb6C/ye8b/ysbtCp3u7PcpOykynDBiVkp+apARvHlwrEnTSaRLQQarVVrlLVJ17THqnF2eV2ayjPMrcJN+O78hP1kWoIDTcv8uWRmJA=
  app: serene-journey-16504
  on:
    repo: kindcarrier/KindCarrierBackend
